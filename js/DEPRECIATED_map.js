//1 chunk = 16x10
var chunk0 = [];
var chunk1 = [];
var chunk2 = [];
var chunk3 = [];
var chunk4 = [];
/*
var chunkTemplate = [
  [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0], // 0
  [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0], // 1
  [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0], // 2
  [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0], // 3
  [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0], // 4
  [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0], // 5
  [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0], // 6
  [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0], // 7
  [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0], // 8
  [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1] // 9
  ];
*/
chunk0 = [[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0],[1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0],[1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0],[1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0],[1,1,1,1,2,0,0,0,0,0,0,0,0,0,0,0],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]];
chunk1 = [[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]];
chunk2 = [[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1],[0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1],[0,0,0,0,1,1,1,1,1,1,1,0,0,0,0,0],[0,0,1,1,1,1,0,0,0,0,1,0,0,0,0,0],[1,1,1,1,1,1,0,0,0,0,1,0,0,0,0,0],[1,1,1,1,1,1,0,0,0,0,1,1,1,1,1,1]];
chunk3 = [[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[1,1,1,0,0,0,1,1,1,1,0,0,1,1,1,0],[1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,2,0,0,0,0,0,0,0,0,0,0,0],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]];
chunk4 = [[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]];


templateMap = [ chunk0,chunk1,chunk2,chunk3,chunk4 ];

function createMap(blockSize){
  var map = game.map;
  var mapWidth = blockSize * map[0][0].length;
  for (var i=0; i<map.length; i++){
    for (var y=0; y<map[0].length; y++){
      for (var x=0; x<map[0][0].length; x++){
        switch( map[i][y][x] ){
        case 1:
          addonPlatform.add( new Platform(x*blockSize+i*mapWidth, y*blockSize, blockSize-2, blockSize-2) );
          break;
        case 2:
          addonPlatform.add( new Spring(x*blockSize+i*mapWidth, y*blockSize, blockSize-2, blockSize-2, 0) );
          break;
        }
      }
    }
  }
}

function getMap(){
  var m = templateMap;
  if ( !localStorage.map ){
    storage.set('map', m);
  }
  return storage.get('map');
}